# Protect sensitive files
<Files "config.php">
    Require all denied
</Files>

<Files "*.db">
    Require all denied
</Files>

<FilesMatch "^\.">
    Require all denied
</FilesMatch>

# Cache static assets
<FilesMatch "\.(jpg|jpeg|png|gif|ico|css|js)$">
    Header set Cache-Control "public, max-age=2592000"
</FilesMatch>

# Compress text files
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/javascript application/json application/rss+xml
</IfModule>

# Security Headers
<IfModule mod_headers.c>
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-Content-Type-Options "nosniff"
    Header set Referrer-Policy "strict-origin-when-cross-origin"
    # Uncomment HSTS if using HTTPS
    # Header set Strict-Transport-Security "max-age=31536000; includeSubDomains"
</IfModule>

# Protect sensitive directories
<IfModule mod_authz_core.c>
    <DirectoryMatch "(^|/)(\.git|includes|sessions)/">
        Require all denied
    </DirectoryMatch>
</IfModule>
<IfModule !mod_authz_core.c>
    <DirectoryMatch "(^|/)(\.git|includes|sessions)/">
        Order deny,allow
        Deny from all
    </DirectoryMatch>
</IfModule>

# Optional: Pretty URLs
# Optional: Pretty URLs
RewriteEngine On

# Force HTTPS (Uncomment to enable)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L,QSA]